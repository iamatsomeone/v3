api.mod_manager={},api.mod_manager.uninstallAll=function(){return chrome.storage.sync.set({mod_manager:{index:0}}),api.mod_manager.mod_manager={},api.mod_manager.mod_manager.index=0,"success."},api.mod_manager.save=function(){chrome.storage.sync.set({mod_manager:api.mod_manager.mod_manager})},api.mod_manager.active=!0,api.mod_manager.v3script={},api.mod_manager.v3script.getStat=function(a,e){return a.split("#"+e+" ")[1].split(" //")[0]},api.mod_manager.v3script.getSample=function(){return"// ==V3Script==\n// #name         test by AAAAQQQQAAAAQQQQAAAAQQQ\n// #version      0.1.0\n// #description  test!\n// ==/V3Script==\n\n//your code here!"},api.mod_manager.testPlugin=function(id){if(!api.mod_manager.mod_manager[id])throw"error: no such plugin.";eval(decodeURIComponent(api.mod_manager.mod_manager[id].code))},api.mod_manager.disablePlugin=function(a){if(!api.mod_manager.mod_manager[a])throw"error: no such plugin.";api.mod_manager.mod_manager[a].active=!1},api.mod_manager.enablePlugin=function(a){if(!api.mod_manager.mod_manager[a])throw"error: no such plugin.";api.mod_manager.mod_manager[a].active=!0},api.mod_manager.active&&chrome.storage.sync.get(null,(a=>{a.mod_manager||(chrome.storage.sync.set({mod_manager:{index:0}}),a.mod_manager={},a.mod_manager.index=0);try{a.mod_manager.index||(chrome.storage.sync.set({mod_manager:{index:0}}),a.mod_manager={},a.mod_manager.index=0)}catch(e){chrome.storage.sync.set({mod_manager:{index:0}}),a.mod_manager={},a.mod_manager.index=0}api.mod_manager.mod_manager=a.mod_manager,api.mod_manager.loadModManager()})),api.mod_manager.installPluginBakend=function(a,e="v3 plugin",n="0.1.0",m=""){var o={};if(a.includes("// ==V3Script==")&&a.includes("// ==/V3Script==")){var r=a.split("==/V3Script==");r[0]=r[0].replace(/\s+/g," ").trim(),o.title=api.mod_manager.v3script.getStat(r[0],"name"),o.version=api.mod_manager.v3script.getStat(r[0],"version"),o.description=api.mod_manager.v3script.getStat(r[0],"description"),o.id=api.mod_manager.mod_manager.index,o.code=r[1],r[1]==decodeURIComponent(r[1])?o.code=encodeURIComponent(r[1]):o.code=r[1]}else o.title=e,o.version=n,o.id=api.mod_manager.mod_manager.index,o.description=m,o.code=a,a==decodeURIComponent(a)?o.code=encodeURIComponent(a):o.code=a;return o.active=!0,api.mod_manager.mod_manager[api.mod_manager.mod_manager.index]=o,api.mod_manager.mod_manager.index++,api.mod_manager.save(),"succes."},api.mod_manager.loadModManager=function(){for(var key in api.mod_manager.mod_manager)if(api.mod_manager.mod_manager.hasOwnProperty(key)&&"object"==typeof api.mod_manager.mod_manager[key]){var obj=api.mod_manager.mod_manager[key];obj.active&&eval(decodeURIComponent(obj.code))}};